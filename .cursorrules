# WifiGuard Senior Android Development Standards
# Стандарты разработки для проекта WifiGuard

## Язык документации
# Все комментарии и документация на русском языке

## Code Style - Стиль кода

### Kotlin Coding Conventions
- Следуйте официальным Kotlin Coding Conventions
- Используйте осмысленные имена переменных, отражающие предметную область
- Максимальная длина функции: 30 строк
- Максимальная длина класса: 300 строк
- Используйте KDoc для документирования публичных API

### Именование
- Классы: PascalCase (например, WifiScannerImpl)
- Функции и переменные: camelCase (например, startScan)
- Константы: SCREAMING_SNAKE_CASE (например, MAX_SCAN_INTERVAL)
- Файлы: соответствуют имени основного класса

### Форматирование
- Отступы: 4 пробела
- Максимальная длина строки: 120 символов
- Всегда используйте фигурные скобки для if/else/when
- Trailing comma в многострочных списках

## Security - Безопасность

### КРИТИЧЕСКИ ВАЖНО
- НИКОГДА не хардкодьте секреты (API ключи, пароли)
- ВСЕГДА используйте Android Keystore для чувствительных данных
- ВСЕГДА валидируйте внешние входные данные
- Используйте EncryptedSharedPreferences для хранения ключей
- Реализуйте certificate pinning для API вызовов

### Шифрование
- Используйте AES-256-GCM для симметричного шифрования
- Генерируйте случайный IV для каждой операции шифрования
- Очищайте чувствительные данные из памяти после использования

### Валидация
- Валидируйте BSSID (MAC-адрес) с помощью regex
- Валидируйте SSID на длину и опасные символы
- Проверяйте диапазоны уровня сигнала и частоты
- Санитизируйте пользовательский ввод в поиске/фильтрации

## Performance - Производительность

### Оптимизация алгоритмов
- Избегайте вложенных циклов (O(n²) → O(n))
- Используйте HashMap для быстрого поиска
- Применяйте LruCache для кэширования результатов
- Используйте lazy initialization для тяжёлых объектов

### База данных
- Добавляйте индексы на часто запрашиваемые поля
- Используйте @Transaction для атомарных операций
- НЕ используйте fallbackToDestructiveMigration()
- Всегда пишите миграции для изменений схемы

### Многопоточность
- Используйте Mutex для сериализации критических секций
- Применяйте StateFlow для thread-safe state management
- НЕ используйте GlobalScope - используйте structured concurrency
- Используйте SupervisorJob для изоляции ошибок корутин

## Architecture - Архитектура

### SOLID Principles
- Single Responsibility: один класс - одна ответственность
- Open/Closed: открыты для расширения, закрыты для модификации
- Liskov Substitution: подтипы должны заменять базовые типы
- Interface Segregation: маленькие специфичные интерфейсы
- Dependency Inversion: зависимости от абстракций

### Clean Architecture Layers
- Domain: бизнес-логика, use cases, repository interfaces
- Data: реализации репозиториев, data sources, mappers
- Presentation: ViewModels, UI components

### Dependency Injection
- Используйте Hilt для DI
- Помечайте классы @Singleton только если необходимо
- Предпочитайте constructor injection

## Testing - Тестирование

### Требования к покрытию
- Минимум 80% покрытия для критических путей
- 100% покрытия для security-related кода
- Всегда пишите тесты перед исправлением багов

### Структура тестов
- Given-When-Then структура
- Один assert на тест (предпочтительно)
- Мокируйте внешние зависимости

### Именование тестов
```kotlin
@Test
fun `functionName - описание условия - ожидаемый результат`()
```

## Error Handling - Обработка ошибок

### Принципы
- Используйте sealed class Result<T> для возврата результатов
- Создавайте domain-specific исключения
- Логируйте ошибки с контекстом
- Реализуйте graceful degradation

### Retry Policy
- Используйте exponential backoff
- Ограничивайте количество повторных попыток
- Логируйте каждую попытку

## Git Workflow

### Commit Messages
- Используйте осмысленные сообщения на русском
- Начинайте с глагола: "Добавить", "Исправить", "Обновить"
- Ограничивайте первую строку 72 символами

### Branch Naming
- feature/имя-фичи
- fix/описание-бага
- refactor/что-рефакторим

## Запрещено

- ❌ Использовать fallbackToDestructiveMigration()
- ❌ Хардкодить секреты в коде
- ❌ Использовать GlobalScope
- ❌ Игнорировать CancellationException
- ❌ Использовать @Suppress("DEPRECATION") без комментария
- ❌ Коммитить закомментированный код
- ❌ Использовать println() вместо Log




























