# üìã –ê—É–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Google Play –∏ Android 15 (API 35) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 2025-11-30  
**–ê—É–¥–∏—Ç–æ—Ä:** Lead Android DevOps Auditor

---

## üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï** - –ü—Ä–æ–±–ª–µ–º—ã, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —Å–±–æ—Ä–∫—É/–∑–∞–≥—Ä—É–∑–∫—É

1. **NDK/–°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** - –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã `.so` —Ñ–∞–π–ª—ã –≤ —Å–±–æ—Ä–∫–µ:
   - –ù–∞–π–¥–µ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `libandroidx.graphics.path.so`, `libdatastore_shared_counter.so`
   - –≠—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å 16 KB page size, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Android 15
   - **–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 16 KB page alignment** —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è `useLegacyPackaging = false`**:
   - –í `app/build.gradle.kts` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `useLegacyPackaging = true`
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useLegacyPackaging = false` –¥–ª—è Android 15 –∏ AGP 8.6.0

---

## üü° **–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø** - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏

1. **Foreground Service Declaration**:
   - –í `AndroidManifest.xml` –µ—Å—Ç—å `service` —Å `foregroundServiceType="location"`
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–∏–ø—ã foreground —Å–µ—Ä–≤–∏—Å–æ–≤ —è–≤–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω—ã –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
   - –î–ª—è Android 14/15 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–∏–ø–∞–º foreground —Å–µ—Ä–≤–∏—Å–æ–≤ —É–∂–µ—Å—Ç–æ—á–µ–Ω—ã

2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**:
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è: `ACCESS_FINE_LOCATION`, `ACCESS_COARSE_LOCATION`, `NEARBY_WIFI_DEVICES`
   - –≠—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –Ω–∞–¥–ª–µ–∂–∞—â–µ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤ –ø–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

---

## üìã **–í–ï–†–°–ò–ò** - –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è | –¢—Ä–µ–±—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å |
|----------|----------------|------------------|--------|
| Target SDK | 35 | 35 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| Compile SDK | 35 | 35 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| Min SDK | 26 | ‚â• 26 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| AGP | 8.6.0 | ‚â• 8.2 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| Kotlin | 2.1.0 | ‚â• 1.9.20 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| Gradle | 8.10 | ‚â• 8.4 | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| JDK | 17 | 17-21 (–¥–ª—è AGP 8.x) | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| Billing Library | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚â• 7.0.0 | ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è |
| Compose BOM | 2025.00.00 | - | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |

---

## üí° **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

1. **–î–ª—è 16 KB page size –ø–æ–¥–¥–µ—Ä–∂–∫–∏**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ 16 KB page alignment
   readelf -W -A path/to/libandroidx.graphics.path.so
   readelf -W -A path/to/libdatastore_shared_counter.so
   ```

2. **–û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–ø–∞–∫–æ–≤–∫–∏ NDK** (–≤ `app/build.gradle.kts`):
   ```kotlin
   packaging {
       resources {
           excludes += "/META-INF/{AL2.0,LGPL2.1}"
           excludes += "/META-INF/INDEX.LIST"
           excludes += "/META-INF/DEPENDENCIES"
           excludes += "/META-INF/gradle/incremental.annotation.processors"
       }
       jniLibs {
           useLegacyPackaging = false  // –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ false –¥–ª—è Android 15
       }
   }
   ```

3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ foreground —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç —è–≤–Ω—ã–µ —Ç–∏–ø—ã**:
   –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ foreground —Å–µ—Ä–≤–∏—Å–∞, –¥–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç:
   ```xml
   <uses-permission android:name="android.permission.FOREGROUND_SERVICE_LOCATION" />
   <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC" />
   ```

4. **–î–ª—è WorkManager foreground service**:
   –í –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ —É–∂–µ –µ—Å—Ç—å:
   ```xml
   <service
       android:name="androidx.work.impl.foreground.SystemForegroundService"
       android:foregroundServiceType="location"
       tools:node="merge" />
   ```
   –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã foreground —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ.

---

**–í—ã–≤–æ–¥:** –ü—Ä–æ–µ–∫—Ç –≤ —Ü–µ–ª–æ–º –≥–æ—Ç–æ–≤ –∫ Android 15 —Å Target SDK 35, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ 16 KB page alignment –¥–ª—è NDK –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å foreground —Å–µ—Ä–≤–∏—Å–∞–º–∏. Billing Library –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —á—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –≤–µ—Ä—Å–∏–∏ 7.x.